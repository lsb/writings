(this.webpackJsonpwebcamhud=this.webpackJsonpwebcamhud||[]).push([[0],{14:function(e,t,a){e.exports=a(22)},19:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(5),s=a.n(r),c=(a(19),a(2)),o=a.n(c),l=a(3),u=a(6),m=a(7),h=a(8),d=a(12),p=a(13),f=(a(21),a(9)),v=a.n(f),g=a(10),b=a(11),w=a.n(b),y=a(1),x=a.n(y),E={width:256,height:256},k=function(){return Array.from({length:69},(function(){return 1}))},j=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={idx:0,arts:k(),texts:k(),plants:k(),picture:null,identification:null},n.webcamref=i.a.createRef(),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.handleWebcam()}},{key:"handleWebcam",value:function(){var e=this;if(this.webcamref&&this.webcamref.current&&this.webcamref.current.getScreenshot){var t=this.webcamref.current.getScreenshot();null!==t?this.ingestPicture(t):(console.log("screenshot is null"),requestAnimationFrame((function(){return e.handleWebcam()})))}}},{key:"ingestStats",value:function(e){var t=e.art,a=e.text,n=e.plant,i=e.millis,r=this.state,s=r.idx,c=r.arts,o=r.texts,l=r.plants;c[s]=t,o[s]=a,l[s]=n,this.setState({idx:(s+1)%69,millis:i})}},{key:"ingestPicture",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,i,r,s,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),this.setState({picture:t}),(n=new FormData).append("image",Object(g.a)(t)),e.next=6,fetch("https://art-text-plant.onrender.com/identify",{method:"POST",body:n});case 6:return i=e.sent,e.next=9,i.json();case 9:r=e.sent,s=Date.now(),requestAnimationFrame((function(){return c.handleWebcam()})),this.ingestStats(Object(l.a)({},r,{millis:s-a}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.idx,n=t.arts,r=t.texts,s=t.plants;return i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,i.a.createElement("span",{style:{opacity:.75*n[(a+69-1)%69]+.25}},"ART"),"\xa0",i.a.createElement("span",{style:{opacity:.75*r[(a+69-1)%69]+.25}},"TEXT"),"\xa0",i.a.createElement("span",{style:{opacity:.75*s[(a+69-1)%69]+.25}},"PLANT")),i.a.createElement("h2",null,"via your\xa0",i.a.createElement("select",{id:"facingMode",onChange:function(t){return e.setState({facingMode:t.target.value})},value:this.state.facingMode},i.a.createElement("option",{value:"user"},"selfie"),i.a.createElement("option",{value:"environment"},"photo"),i.a.createElement("option",{value:""})),"\xa0",i.a.createElement("i",null,"webcam!")),i.a.createElement(v.a,{audio:!1,height:E.height,ref:this.webcamref,screenshotFormat:"image/jpeg",width:E.width,videoConstraints:Object(l.a)({},E,{facingMode:this.state.facingMode})}),i.a.createElement("div",{className:"millis"},this.state.millis," millis"),i.a.createElement(w.a,{highcharts:x.a,options:{chart:{type:"area",animation:!1},title:{text:"predictions"},series:[{name:"art",data:n},{name:"text",data:r},{name:"plant",data:s}],yAxis:{min:0,max:1,title:"certainty"},xAxis:{min:0,max:69,title:"point in time"},plotOptions:{area:{marker:{enabled:!1}}}}}))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.b861164f.chunk.js.map